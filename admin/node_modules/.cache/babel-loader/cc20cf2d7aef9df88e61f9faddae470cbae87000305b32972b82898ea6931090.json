{"ast":null,"code":"var _s = $RefreshSig$();\nimport { createContext, useState, useRef, useCallback } from 'react';\nimport isNil from 'lodash/isNil';\nconst DropdownMenuContext = /*#__PURE__*/createContext();\nexport const DropdownMenuContextProvider = DropdownMenuContext.Provider;\nexport const DropdownMenuContextConsumer = DropdownMenuContext.Consumer;\nexport function useDropdownMenuContext(menuRef) {\n  _s();\n  const [open, setOpen] = useState(false);\n  const [items, setItems] = useState([]);\n  const [activeItemIndex, setActiveItemIndex] = useState(null);\n  const previousActiveElementRef = useRef(null);\n  const registerItem = useCallback((element, props) => {\n    setItems(items => [...items, {\n      element,\n      props\n    }]);\n  }, []);\n  const unregisterItem = useCallback(id => {\n    setItems(items => items.filter(item => item.element.id !== id));\n  }, []);\n  const focusSelf = useCallback(() => {\n    requestAnimationFrame(() => {\n      if (document.activeElement !== menuRef.current) {\n        var _menuRef$current;\n        previousActiveElementRef.current = document.activeElement;\n        (_menuRef$current = menuRef.current) === null || _menuRef$current === void 0 ? void 0 : _menuRef$current.focus();\n      }\n    });\n  }, [menuRef]);\n  const focusItem = useCallback(item => {\n    const itemIndex = items.indexOf(item);\n    if (itemIndex !== -1) {\n      setActiveItemIndex(itemIndex);\n      focusSelf();\n    }\n  }, [items, focusSelf]);\n  const lookupNextActiveItemIndex = useCallback((start, direction) => {\n    for (let i = start; i > -1 && i < items.length; i += direction) {\n      var _items$i$props;\n      if (!((_items$i$props = items[i].props) !== null && _items$i$props !== void 0 && _items$i$props.disabled)) {\n        return i;\n      }\n    }\n    return null;\n  }, [items]);\n  const focusItemAt = useCallback(index => {\n    if (isNil(index)) {\n      setActiveItemIndex(null);\n      focusSelf();\n    } else {\n      let activeItemIndex;\n      if (index === 0) {\n        activeItemIndex = lookupNextActiveItemIndex(0, 1);\n      } else if (index === -1) {\n        activeItemIndex = lookupNextActiveItemIndex(items.length - 1, -1);\n      }\n      if (!isNil(activeItemIndex)) {\n        focusItem(items[activeItemIndex]);\n      }\n    }\n  }, [items, focusItem, focusSelf, lookupNextActiveItemIndex]);\n  const openMenu = useCallback(() => {\n    setOpen(true);\n    focusSelf();\n  }, [focusSelf]);\n  const closeMenu = useCallback(() => {\n    setOpen(false);\n    setActiveItemIndex(null);\n    requestAnimationFrame(() => {\n      var _previousActiveElemen;\n      (_previousActiveElemen = previousActiveElementRef.current) === null || _previousActiveElemen === void 0 ? void 0 : _previousActiveElemen.focus();\n    });\n  }, []);\n  return {\n    open,\n    items,\n    activeItemIndex,\n    registerItem,\n    unregisterItem,\n    focusItemAt,\n    openMenu,\n    closeMenu\n  };\n}\n_s(useDropdownMenuContext, \"+mj/M6T6frHqPdD4E/C7fD8tXQw=\");\nexport default DropdownMenuContext;","map":{"version":3,"names":["createContext","useState","useRef","useCallback","isNil","DropdownMenuContext","DropdownMenuContextProvider","Provider","DropdownMenuContextConsumer","Consumer","useDropdownMenuContext","menuRef","_s","open","setOpen","items","setItems","activeItemIndex","setActiveItemIndex","previousActiveElementRef","registerItem","element","props","unregisterItem","id","filter","item","focusSelf","requestAnimationFrame","document","activeElement","current","_menuRef$current","focus","focusItem","itemIndex","indexOf","lookupNextActiveItemIndex","start","direction","i","length","_items$i$props","disabled","focusItemAt","index","openMenu","closeMenu","_previousActiveElemen"],"sources":["C:/Projects/task-app/admin/src/components/ui/Dropdown/context/dropdownMenuContext.js"],"sourcesContent":["import { createContext, useState, useRef, useCallback } from 'react'\nimport isNil from 'lodash/isNil'\n\nconst DropdownMenuContext = createContext()\n\nexport const DropdownMenuContextProvider = DropdownMenuContext.Provider\n\nexport const DropdownMenuContextConsumer = DropdownMenuContext.Consumer\n\nexport function useDropdownMenuContext (menuRef) {\n\n\tconst [open, setOpen] = useState(false)\n\n\tconst [items, setItems] = useState([])\n\tconst [activeItemIndex, setActiveItemIndex] = useState(null)\n\tconst previousActiveElementRef = useRef(null)\n\n\tconst registerItem = useCallback((element, props) => {\n\t\tsetItems(items => [...items, { element, props }])\n\t}, [])\n\n\tconst unregisterItem = useCallback((id) => {\n\t\tsetItems(items => items.filter(item => item.element.id !== id))\n\t}, [])\n\n\tconst focusSelf = useCallback(() => {\n\t\trequestAnimationFrame(() => {\n\t\t\tif (document.activeElement !== menuRef.current) {\n\t\t\t\tpreviousActiveElementRef.current = document.activeElement\n\t\t\t\tmenuRef.current?.focus()\n\t\t\t}\n\t\t})\n\t}, [menuRef])\n\n\tconst focusItem = useCallback(\n\t\t(item) => {\n\t\t\tconst itemIndex = items.indexOf(item)\n\t\t\tif (itemIndex !== -1) {\n\t\t\t\tsetActiveItemIndex(itemIndex)\n\t\t\t\tfocusSelf()\n\t\t\t}\n\t\t},\n\t\t[items, focusSelf]\n\t)\n\n\tconst lookupNextActiveItemIndex = useCallback((start, direction) => {\n\t\tfor (let i = start; i > -1 && i < items.length; i += direction) {\n\t\t\tif (!items[i].props?.disabled) {\n\t\t\t\treturn i\n\t\t\t}\n\t\t}\n\t\treturn null\n\t}, [items])\n\n\tconst focusItemAt = useCallback((index) => {\n\t\tif (isNil(index)) {\n\t\t\tsetActiveItemIndex(null)\n\t\t\tfocusSelf()\n\t\t} else {\n\t\t\tlet activeItemIndex\n\t\t\tif (index === 0) {\n\t\t\t\tactiveItemIndex = lookupNextActiveItemIndex(0, 1)\n\t\t\t} else if (index === -1) {\n\t\t\t\tactiveItemIndex = lookupNextActiveItemIndex(items.length - 1, -1)\n\t\t\t}\n\n\t\t\tif (!isNil(activeItemIndex)) {\n\t\t\t\tfocusItem(items[activeItemIndex])\n\t\t\t}\n\t\t}\n\t}, [items, focusItem, focusSelf, lookupNextActiveItemIndex])\n\n\tconst openMenu = useCallback(() => {\n\t\tsetOpen(true)\n\t\tfocusSelf()\n\t}, [focusSelf])\n\n\tconst closeMenu = useCallback(() => {\n\t\tsetOpen(false)\n\t\tsetActiveItemIndex(null)\n\t\trequestAnimationFrame(() => {\n\t\t\tpreviousActiveElementRef.current?.focus()\n\t\t})\n\t}, [])\n  \n    return (\n\t\t{\n\t\t\topen,\n\t\t\titems,\n\t\t\tactiveItemIndex,\n\t\t\tregisterItem,\n\t\t\tunregisterItem,\n\t\t\tfocusItemAt,\n\t\t\topenMenu,\n\t\t\tcloseMenu\n\t\t}\n    )\n}\n\nexport default DropdownMenuContext"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}