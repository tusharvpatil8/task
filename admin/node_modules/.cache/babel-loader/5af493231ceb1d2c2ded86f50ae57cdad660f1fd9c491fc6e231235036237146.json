{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useCallback } from 'react';\nimport { findDOMNode } from 'react-dom';\nconst domContains = (context, node) => {\n  if (context.contains) {\n    return context.contains(node);\n  } else if (context.compareDocumentPosition) {\n    return context === node || !!(context.compareDocumentPosition(node) & 16);\n  }\n  if (node) {\n    do {\n      if (node === context) {\n        return true;\n      }\n    } while (node = node.parentNode);\n  }\n  return false;\n};\nconst getRefTarget = ref => {\n  return ref && ('current' in ref ? ref.current : ref);\n};\nfunction getDOMNode(elementOrRef) {\n  const element = (elementOrRef === null || elementOrRef === void 0 ? void 0 : elementOrRef.root) || (elementOrRef === null || elementOrRef === void 0 ? void 0 : elementOrRef.child) || getRefTarget(elementOrRef);\n  if (element !== null && element !== void 0 && element.nodeType && typeof (element === null || element === void 0 ? void 0 : element.nodeName) === 'string') {\n    return element;\n  }\n  return findDOMNode(element);\n}\nfunction isLeftClickEvent(e) {\n  return (e === null || e === void 0 ? void 0 : e.button) === 0;\n}\nfunction isModifiedEvent(e) {\n  return !!(e.metaKey || e.altKey || e.ctrlKey || e !== null && e !== void 0 && e.shiftKey);\n}\nfunction onEventListener(target, eventType, listener, options = false) {\n  target.addEventListener(eventType, listener, options);\n  return {\n    off() {\n      target.removeEventListener(eventType, listener, options);\n    }\n  };\n}\nfunction useRootClose(onRootClose, {\n  disabled,\n  triggerTarget,\n  overlayTarget\n}) {\n  _s();\n  const handleDocumentMouseDown = useCallback(event => {\n    const triggerElement = getDOMNode(triggerTarget);\n    const overlayElement = getDOMNode(overlayTarget);\n    if (triggerElement && domContains(triggerElement, event.target)) {\n      return;\n    }\n    if (overlayElement && domContains(overlayElement, event.target)) {\n      return;\n    }\n    if (isModifiedEvent(event) || !isLeftClickEvent(event)) {\n      return;\n    }\n    onRootClose === null || onRootClose === void 0 ? void 0 : onRootClose(event);\n  }, [onRootClose, triggerTarget, overlayTarget]);\n  useEffect(() => {\n    const currentTarget = getDOMNode(triggerTarget);\n    if (disabled || !currentTarget) return;\n    const doc = () => currentTarget && currentTarget.ownerDocument || document;\n    const onDocumentMouseDownListener = onEventListener(doc(), 'mousedown', handleDocumentMouseDown, true);\n    return () => {\n      onDocumentMouseDownListener === null || onDocumentMouseDownListener === void 0 ? void 0 : onDocumentMouseDownListener.off();\n    };\n  }, [triggerTarget, disabled, onRootClose, handleDocumentMouseDown]);\n}\n_s(useRootClose, \"SZ9CeQhESTBKcrydCnmJso2JC7M=\");\nexport default useRootClose;","map":{"version":3,"names":["useEffect","useCallback","findDOMNode","domContains","context","node","contains","compareDocumentPosition","parentNode","getRefTarget","ref","current","getDOMNode","elementOrRef","element","root","child","nodeType","nodeName","isLeftClickEvent","e","button","isModifiedEvent","metaKey","altKey","ctrlKey","shiftKey","onEventListener","target","eventType","listener","options","addEventListener","off","removeEventListener","useRootClose","onRootClose","disabled","triggerTarget","overlayTarget","_s","handleDocumentMouseDown","event","triggerElement","overlayElement","currentTarget","doc","ownerDocument","document","onDocumentMouseDownListener"],"sources":["C:/Projects/task-app/admin/src/components/ui/hooks/useRootClose.js"],"sourcesContent":["import { useEffect, useCallback } from 'react'\nimport { findDOMNode } from 'react-dom'\n\nconst domContains = (context, node) => {\n    if (context.contains) {\n        return context.contains(node)\n    } else if (context.compareDocumentPosition) {\n        return context === node || !!(context.compareDocumentPosition(node) & 16)\n    }\n    if (node) {\n        do {\n            if (node === context) {\n            return true\n            }\n        } while ((node = node.parentNode))\n    }\n    return false\n}\n\nconst getRefTarget = (ref) => {\n    return ref && ('current' in ref ? ref.current : ref)\n}\n\nfunction getDOMNode(elementOrRef) {\n\n    const element = elementOrRef?.root || elementOrRef?.child || getRefTarget(elementOrRef)\n\n    if (element?.nodeType && typeof element?.nodeName === 'string') {\n      return element\n    }\n\n    return findDOMNode(element)\n  }\n\nfunction isLeftClickEvent(e) {\n  return e?.button === 0\n}\n\nfunction isModifiedEvent(e) {\n  return !!(e.metaKey || e.altKey || e.ctrlKey || e?.shiftKey)\n}\n\nfunction onEventListener(target, eventType, listener, options = false ) {\n\n\n    target.addEventListener(eventType, listener, options)\n  \n    return {\n        off() {\n            target.removeEventListener(eventType, listener, options)\n        }\n    }\n}\n\nfunction useRootClose(onRootClose ,{ disabled, triggerTarget, overlayTarget }) {\n\n    const handleDocumentMouseDown = useCallback(event => {\n        const triggerElement = getDOMNode(triggerTarget)\n        const overlayElement = getDOMNode(overlayTarget)\n\n        if (triggerElement && domContains(triggerElement, event.target)) {\n            return\n        }\n\n        if (overlayElement && domContains(overlayElement, event.target)) {\n            return\n        }\n\n        if (isModifiedEvent(event) || !isLeftClickEvent(event)) {\n            return\n        }\n\n        onRootClose?.(event)\n    }, [onRootClose, triggerTarget, overlayTarget])\n\n    useEffect(() => {\n        const currentTarget = getDOMNode(triggerTarget)\n\n        if (disabled || !currentTarget) return\n\n        const doc = () => (currentTarget && currentTarget.ownerDocument) || document\n        const onDocumentMouseDownListener = onEventListener(doc(), 'mousedown', handleDocumentMouseDown, true)\n        \n\n        return () => {\n            onDocumentMouseDownListener?.off()\n        }\n    }, [triggerTarget, disabled, onRootClose, handleDocumentMouseDown])\n}\n\nexport default useRootClose"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}